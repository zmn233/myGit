<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>插入排序</title>
</head>
<body>
  <script>
    // 针对当前这个数，从后往前找到属于它的位置，把他放进去
    let insertionSort1 = arr => {
      let len = arr.length, key;
      for(let i = 1; i < len; i++ ) {
        key = arr[i];
        let j = i - 1;
        // 此时不用for循环是因为并不知道循环的次数，当找到第一个满足条件的位置就退出循环
        while(j >= 0 && arr[j] > key) {
          arr[j + 1] = arr[j];
          j--;
        }
        arr[j + 1] = key;
      }
      return arr;
    }

    // 改良版：将在已有序序列中查找插入位置的方法改为二分查找
    let insertionSort2 = arr => {
      for(let i = 1; i < arr.length; i++) {
        let left = 0, right = i - 1, key = arr[i], middle;
        while(left <= right) {
          middle = parseInt((left + right) / 2);
          if(key < arr[middle]) {
            right = middle - 1;
          } else {
            left = middle + 1;
          }
        }
        for(let j = i - 1; j >= left; j--) {
          arr[j + 1] = arr[j];
        }
        arr[left] = key;
      }
      return arr;
    }
    let arr = [34, 45, 32, 66, 1, 67, 45, 33, 67];
    console.log(insertionSort2(arr));
  </script>
</body>
</html>